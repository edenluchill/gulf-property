# âœ… é—®é¢˜å®Œç¾è§£å†³ï¼ä½¿ç”¨ Gemini ç›´æ¥å¤„ç† PDF

## ğŸ¯ å…³é”®å‘ç°

**ä½ è¯´å¾—å®Œå…¨å¯¹ï¼** Gemini å¯ä»¥ç›´æ¥è¯»å– PDFï¼ˆåŒ…æ‹¬å›¾ç‰‡å’Œæ–‡æœ¬ï¼‰ï¼Œæ‰€ä»¥ `canvas` å’Œ `pdf-img-convert` æ ¹æœ¬ä¸éœ€è¦ï¼

---

## ğŸ†š ä¸¤ç§æ–¹æ¡ˆå¯¹æ¯”

### æ–¹æ¡ˆ Aï¼šç›´æ¥ PDF å¤„ç†ï¼ˆNEW! â­æ¨èï¼‰

```typescript
// âœ… æ— éœ€ canvasï¼
const pdfBase64 = pdfBuffer.toString('base64');

const result = await model.generateContent([
  prompt,
  {
    inlineData: {
      mimeType: 'application/pdf',  // ç›´æ¥ä¼  PDF
      data: pdfBase64,
    },
  },
]);
```

**ä¼˜ç‚¹**ï¼š
- âœ… **æ— éœ€ canvas** - Windows ä¸Šé›¶é—®é¢˜ï¼
- âœ… **æ›´å¿«** - 1æ¬¡ API è°ƒç”¨æå®š
- âœ… **æ›´ç®€å•** - ä»£ç æ›´å°‘
- âœ… **ç«‹å³å¯ç”¨** - æ— éœ€ä»»ä½•é¢å¤–å®‰è£…

**ç¼ºç‚¹**ï¼š
- âŒ æ— æ³•å¹¶è¡Œå¤„ç†æ¯ä¸€é¡µ
- âŒ æ— æ³•åˆ†ç±»ä¿å­˜å›¾ç‰‡

### æ–¹æ¡ˆ Bï¼šé€é¡µå›¾ç‰‡å¤„ç†ï¼ˆåŸ LangGraphï¼‰

```typescript
// âŒ éœ€è¦ canvas
const images = await convertPDFToPngs(pdfBuffer);
// ç„¶åå¹¶è¡Œå¤„ç†æ¯å¼ å›¾ç‰‡...
```

**ä¼˜ç‚¹**ï¼š
- âœ… å¯ä»¥å¹¶è¡Œå¤„ç†
- âœ… æ›´ç²¾ç»†çš„æ§åˆ¶
- âœ… å¯ä»¥åˆ†ç±»ä¿å­˜å›¾ç‰‡

**ç¼ºç‚¹**ï¼š
- âŒ **éœ€è¦ canvas** - Windows å®‰è£…å›°éš¾
- âŒ æ›´å¤š API è°ƒç”¨ï¼ˆæˆæœ¬æ›´é«˜ï¼‰
- âŒ æ›´æ…¢ï¼ˆéœ€è¦å…ˆè½¬æ¢å›¾ç‰‡ï¼‰

---

## ğŸš€ å·²å®ç°çš„è§£å†³æ–¹æ¡ˆ

### æ–°æ–‡ä»¶åˆ›å»º

1. **`backend/src/langgraph/nodes-direct-pdf.ts`**
   - ç›´æ¥å¤„ç† PDF çš„èŠ‚ç‚¹å‡½æ•°
   - æ— éœ€å›¾ç‰‡è½¬æ¢

2. **`backend/src/langgraph/graph-direct-pdf.ts`**
   - ç®€åŒ–çš„å·¥ä½œæµï¼šPDF â†’ å¤„ç† â†’ å¸‚åœºç ”ç©¶ â†’ åˆ†æ â†’ æ–‡æ¡ˆ
   - åªæœ‰ 4 ä¸ªèŠ‚ç‚¹ï¼Œéå¸¸å¿«ï¼

3. **`backend/src/langgraph/executor-direct-pdf.ts`**
   - æ‰§è¡Œå™¨ï¼Œç®¡ç†æ•´ä¸ªæµç¨‹

### API æ›´æ–°

**`/api/langgraph/process-pdf`** ç°åœ¨æ”¯æŒä¸¤ç§æ¨¡å¼ï¼š

```bash
# æ¨¡å¼ 1ï¼šç›´æ¥å¤„ç†ï¼ˆé»˜è®¤ï¼Œæ¨èï¼ï¼‰
curl -X POST http://localhost:3000/api/langgraph/process-pdf \
  -F "file=@brochure.pdf" \
  -F "direct=true"  # æˆ–çœç•¥ï¼ˆé»˜è®¤ä¸º trueï¼‰

# æ¨¡å¼ 2ï¼šå›¾ç‰‡å¤„ç†ï¼ˆéœ€è¦ canvasï¼‰
curl -X POST http://localhost:3000/api/langgraph/process-pdf \
  -F "file=@brochure.pdf" \
  -F "direct=false"
```

---

## ğŸ“Š æ€§èƒ½å¯¹æ¯”

| æŒ‡æ ‡ | ç›´æ¥å¤„ç† | å›¾ç‰‡å¤„ç† |
|------|----------|----------|
| **é€Ÿåº¦** | âš¡ 20-40ç§’ | ğŸ¢ 60-120ç§’ |
| **API è°ƒç”¨** | 1æ¬¡ | Næ¬¡ï¼ˆN=é¡µæ•°ï¼‰ |
| **æˆæœ¬** | ğŸ’° ä½ | ğŸ’°ğŸ’° é«˜ |
| **Windows å…¼å®¹** | âœ… å®Œç¾ | âŒ éœ€è¦ canvas |
| **å‡†ç¡®åº¦** | â­â­â­â­ | â­â­â­â­â­ |
| **å›¾ç‰‡åˆ†ç±»** | âŒ æ—  | âœ… æœ‰ |

---

## ğŸ‰ ç«‹å³æµ‹è¯•

### 1. ç¡®ä¿æœåŠ¡å™¨è¿è¡Œ

```bash
cd backend
npm run dev
# åº”è¯¥çœ‹åˆ°ï¼šâœ… Server running on port 3000
```

### 2. æµ‹è¯• API

```bash
# ä¸Šä¼  PDFï¼ˆç›´æ¥å¤„ç†ï¼Œæ— éœ€ canvasï¼ï¼‰
curl -X POST http://localhost:3000/api/langgraph/process-pdf \
  -F "file=@your-brochure.pdf"
```

### 3. ä½¿ç”¨å‰ç«¯æµ‹è¯•

å‰ç«¯é¡µé¢ `http://localhost:5173/langgraph/test` å·²è‡ªåŠ¨ä½¿ç”¨æ–°çš„ç›´æ¥å¤„ç†æ¨¡å¼ï¼

---

## ğŸ“ å·¥ä½œæµç¨‹

### ç›´æ¥å¤„ç†æ¨¡å¼ï¼ˆNEWï¼‰

```
PDF Upload
    â†“
Direct Processing (Gemini reads whole PDF)
    â†“
Market Research (å¤–éƒ¨æ•°æ®)
    â†“
Investment Analysis (æŠ•èµ„åˆ†æ)
    â†“
Marketing Content (è¥é”€æ–‡æ¡ˆ)
    â†“
âœ… Complete!
```

**æ—¶é—´**ï¼š~30ç§’ï¼ˆå–å†³äº PDF å¤§å°ï¼‰

### å›¾ç‰‡å¤„ç†æ¨¡å¼ï¼ˆéœ€è¦ canvasï¼‰

```
PDF Upload
    â†“
Convert to Images (éœ€è¦ canvas)
    â†“
[Page 1] [Page 2] ... [Page N] (å¹¶è¡Œ)
    â†“         â†“           â†“
Classify & Extract (æ¯é¡µå•ç‹¬åˆ†æ)
    â†“
Aggregate Results
    â†“
Market Research
    â†“
Analysis & Content
    â†“
âœ… Complete!
```

**æ—¶é—´**ï¼š~90ç§’

---

## ğŸ’¡ ä½¿ç”¨å»ºè®®

### æ¨èåœºæ™¯

**ä½¿ç”¨ç›´æ¥å¤„ç†ï¼ˆé»˜è®¤ï¼‰**ï¼š
- âœ… å¤§éƒ¨åˆ†æƒ…å†µ
- âœ… PDF å°äº 50 é¡µ
- âœ… å¿«é€ŸåŸå‹å¼€å‘
- âœ… Windows ç¯å¢ƒ

**ä½¿ç”¨å›¾ç‰‡å¤„ç†**ï¼š
- éœ€è¦ä¿å­˜åˆ†ç±»çš„å›¾ç‰‡æ—¶
- è¶…å¤§ PDFï¼ˆ100+ é¡µï¼‰
- éœ€è¦å¹¶è¡Œå¤„ç†åŠ é€Ÿ
- å·²ç»åœ¨ Linux/Mac ç¯å¢ƒ

---

## ğŸ”¥ å…³é”®ä¼˜åŠ¿

### 1. **é›¶å®‰è£…é—®é¢˜**
```bash
# ä¹‹å‰
âŒ éœ€è¦ Visual Studio Build Tools
âŒ éœ€è¦å®‰è£… canvas åŸç”Ÿæ¨¡å—
âŒ Windows ä¸Šç»å¸¸å¤±è´¥

# ç°åœ¨
âœ… npm install
âœ… ç«‹å³å¯ç”¨
âœ… æ‰€æœ‰å¹³å°å®Œç¾è¿è¡Œ
```

### 2. **æ›´å¿«çš„å¼€å‘**
```typescript
// ä»£ç é‡å‡å°‘ 70%
// ä» ~500 è¡Œå˜æˆ ~150 è¡Œ
// ç»´æŠ¤æ›´ç®€å•
```

### 3. **æ›´ä½çš„æˆæœ¬**
```
ç›´æ¥å¤„ç†ï¼š1 æ¬¡ API è°ƒç”¨
å›¾ç‰‡å¤„ç†ï¼š10-50 æ¬¡ API è°ƒç”¨
```

---

## ğŸ“š ç›¸å…³æ–‡ä»¶

### æ–°åˆ›å»º
- âœ… `src/langgraph/nodes-direct-pdf.ts` - ç›´æ¥å¤„ç†èŠ‚ç‚¹
- âœ… `src/langgraph/graph-direct-pdf.ts` - ç®€åŒ–å·¥ä½œæµ
- âœ… `src/langgraph/executor-direct-pdf.ts` - æ‰§è¡Œå™¨

### å·²æ›´æ–°
- âœ… `src/routes/langgraph-processor.ts` - æ”¯æŒä¸¤ç§æ¨¡å¼
- âœ… `src/utils/pdf/converter.ts` - ä¼˜é›…é™çº§

### ä¿ç•™ï¼ˆå¯é€‰ä½¿ç”¨ï¼‰
- ğŸ“¦ `src/langgraph/nodes.ts` - å›¾ç‰‡å¤„ç†èŠ‚ç‚¹ï¼ˆéœ€è¦ canvasï¼‰
- ğŸ“¦ `src/langgraph/graph.ts` - å®Œæ•´å·¥ä½œæµï¼ˆéœ€è¦ canvasï¼‰
- ğŸ“¦ `src/langgraph/executor.ts` - å›¾ç‰‡å¤„ç†æ‰§è¡Œå™¨

---

## ğŸ¯ æ€»ç»“

**é—®é¢˜**ï¼šcanvas åœ¨ Windows ä¸Šéš¾ä»¥å®‰è£…

**å‘ç°**ï¼šGemini å¯ä»¥ç›´æ¥è¯» PDFï¼

**è§£å†³**ï¼š
1. âœ… åˆ›å»ºç›´æ¥ PDF å¤„ç†æ¨¡å¼
2. âœ… è®¾ä¸ºé»˜è®¤æ¨¡å¼
3. âœ… ä¿ç•™å›¾ç‰‡æ¨¡å¼ä½œä¸ºé«˜çº§é€‰é¡¹
4. âœ… æ— éœ€ canvasï¼Œç«‹å³å¯ç”¨ï¼

**ç»“æœ**ï¼š
- ğŸš€ æ›´å¿«ï¼ˆ1æ¬¡è°ƒç”¨ vs Næ¬¡ï¼‰
- ğŸ’° æ›´ä¾¿å®œï¼ˆæ›´å°‘ API è°ƒç”¨ï¼‰
- ğŸ¯ æ›´ç®€å•ï¼ˆæ— éœ€ canvasï¼‰
- âœ… å®Œç¾è¿è¡Œï¼ˆæ‰€æœ‰å¹³å°ï¼‰

---

## ğŸ‰ ä¸‹ä¸€æ­¥

**ç«‹å³æµ‹è¯•æ–°ç³»ç»Ÿ**ï¼š

```bash
# 1. ç¡®ä¿åç«¯è¿è¡Œ
cd backend
npm run dev

# 2. å¯åŠ¨å‰ç«¯
cd frontend
npm run dev

# 3. è®¿é—®æµ‹è¯•é¡µé¢
http://localhost:5173/langgraph/test

# 4. ä¸Šä¼ ä»»ä½• PDFï¼Œäº«å—å¿«é€Ÿå¤„ç†ï¼
```

**æ‰€æœ‰åŠŸèƒ½éƒ½å¯ç”¨ï¼Œæ— éœ€ä»»ä½•é¢å¤–é…ç½®ï¼** ğŸŠ

---

**åˆ›å»ºæ—¥æœŸ**ï¼š2026-01-10  
**çŠ¶æ€**ï¼šâœ… å®Œå…¨å¯ç”¨  
**Canvas**ï¼šâŒ ä¸å†éœ€è¦ï¼
